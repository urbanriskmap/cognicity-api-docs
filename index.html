
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#api-reference" class="toc-h1 toc-link" data-title="api-reference">API Reference</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#authentication" class="toc-h2 toc-link" data-title="authentication">Authentication</a>
                  </li>
                  <li>
                    <a href="#data-formats" class="toc-h2 toc-link" data-title="data-formats">Data Formats</a>
                  </li>
                  <li>
                    <a href="#version" class="toc-h2 toc-link" data-title="version">Version</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#chatbot-api" class="toc-h1 toc-link" data-title="chatbot-api">Chatbot API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#facebook" class="toc-h2 toc-link" data-title="facebook">Facebook</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#data-api" class="toc-h1 toc-link" data-title="data-api">Data API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#cards" class="toc-h2 toc-link" data-title="cards">Cards</a>
                  </li>
                  <li>
                    <a href="#cities" class="toc-h2 toc-link" data-title="cities">Cities</a>
                  </li>
                  <li>
                    <a href="#feeds" class="toc-h2 toc-link" data-title="feeds">Feeds</a>
                  </li>
                  <li>
                    <a href="#floods" class="toc-h2 toc-link" data-title="floods">Floods</a>
                  </li>
                  <li>
                    <a href="#infrastructure" class="toc-h2 toc-link" data-title="infrastructure">Infrastructure</a>
                  </li>
                  <li>
                    <a href="#reports" class="toc-h2 toc-link" data-title="reports">Reports</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#sensors-api" class="toc-h1 toc-link" data-title="sensors-api">Sensors API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-all-sensors" class="toc-h2 toc-link" data-title="get-all-sensors">Get All Sensors</a>
                  </li>
                  <li>
                    <a href="#get-sensor-data" class="toc-h2 toc-link" data-title="get-sensor-data">Get Sensor Data</a>
                  </li>
                  <li>
                    <a href="#create-sensor" class="toc-h2 toc-link" data-title="create-sensor">Create Sensor</a>
                  </li>
                  <li>
                    <a href="#add-sensor-data" class="toc-h2 toc-link" data-title="add-sensor-data">Add Sensor Data</a>
                  </li>
                  <li>
                    <a href="#delete-sensor-data" class="toc-h2 toc-link" data-title="delete-sensor-data">Delete Sensor Data</a>
                  </li>
                  <li>
                    <a href="#delete-sensor" class="toc-h2 toc-link" data-title="delete-sensor">Delete Sensor</a>
                  </li>
              </ul>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='https://github.com/urbanriskmap/'>CogniCity & Risk Map on GitHub</a></li>
            <li><a href='https://github.com/lord/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='api-reference'>API Reference</h1>
<p>Welcome to the CogniCity API. CogniCity is the engine that powers Urban Risk Map. You can use this API to access CogniCity data including flood reports and sensor measurements that are stored in the CogniCity database. You can view example requests in the dark area to the right, and you can switch the programming language of the examples with the tabs in the top right.</p>

<p>CogniCity deployments are organised into <em>instances</em> for different countries. Each instance may support mapping for one of more cities. Currently available instances:</p>

<ul>
<li><a href="https://petabencana.id">petabencana.id</a></li>
<li><a href="https://riskmap.us">riskmap.us</a></li>
<li><a href="https://riskmap.in">riskmap.in</a></li>
</ul>

<p>The CogniCity API is accessible via the <em>data subdomain</em> of each instance, for example:</p>

<ul>
<li><a href="https://data.riskmap.us">data.riskmap.us</a></li>
</ul>

<p>The CogniCity Sensors API is accessible via the <em>sensors subdomain</em> of each instance, for example:</p>

<ul>
<li><a href="https://sensors.riskmap.us">sensors.riskmap.us</a></li>
</ul>
<h2 id='authentication'>Authentication</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"endpoint"</span> -H <span class="s2">"Authorization: token or key"</span>

</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s1">'axios'</span><span class="p">;</span> <span class="c1">// package to make http requests</span>

<span class="cm">/* Request with API key authentication */</span>
<span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/endpoint'</span><span class="p">,</span> <span class="p">{</span><span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="s1">'x-api-key'</span><span class="p">:</span> <span class="s1">'key'</span><span class="p">}})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">))</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">))</span>

<span class="cm">/* Request with token authentication */</span>
<span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/endpoint'</span><span class="p">,</span> <span class="p">{</span><span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="s1">'Authorization'</span><span class="p">:</span> <span class="s1">'token'</span><span class="p">}})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">))</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">))</span>
</code></pre>
<p>Some CogniCity endpoints require authentication in the form of either an API key or a JSON Web Token. Authentication keys and tokens are passed via the <code>x-api-key</code> or <code>Authorization</code> header respectively. Endpoints requiring authentication are detailed below.</p>

<p><code>x-api-key: key</code></p>

<p><code>Authorization: token</code></p>

<aside class="success">
All requests should be made via https.
</aside>
<h2 id='data-formats'>Data Formats</h2>
<blockquote>
<p>Response structure:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">Number</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">Object</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">Array</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>CogniCity provides responses in JSON format. The <code>statusCode</code> object gives the HTTP response status for the request (also available in the response header). The <code>response</code> property may be either an <code>Object</code> or an <code>Array</code> depending on the data returned.</p>

<p>Where responses contain geographical information both the <a href="http://geojson.org/">GeoJSON</a> and <a href="https://github.com/topojson/topojson">TopoJSON</a> formats are supported.</p>

<p>The <code>/floods</code> endpoint also supports responses using the <a href="https://docs.oasis-open.org/emergency/cap/v1.2/CAP-v1.2-os.html">Common Alerting Protocol</a>, an XML format.</p>

<p>CogniCity uses the <a href="https://www.postgresql.org/docs/current/static/datatype-numeric.html">PostgreSQL BIGINT</a> data type. As these numbers are potentially greater than <code>Numbers.MAX_SAFE_INTEGER</code> they are returned as Strings.</p>
<h2 id='version'>Version</h2><h3 id='get-cognicity-version'>Get CogniCity Version</h3>
<p>Get the CogniCity server and database versions for the chosen instance.</p>

<p>The following attributes are returned:</p>

<ul>
<li><code>version</code> refers to CogniCity Server <a href="https://github.com/urbanriskmap/cognicity-server/releases">release version</a></li>
<li><code>schema</code> refers to the CogniCity Database <a href="https://github.com/urbanriskmap/cognicity-schema/releases">release version</a></li>
</ul>
<pre class="highlight shell tab-shell"><code>curl <span class="s1">'/'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>
<span class="nx">request</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
    <span class="na">uri</span><span class="p">:</span> <span class="s1">'/'</span>
  <span class="p">},</span>
  <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">)</span>
</code></pre>
<blockquote>
<p>Example JSON output:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"version"</span><span class="p">:</span><span class="s2">"3.0.6"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"schema"</span><span class="p">:</span><span class="s2">"3.0.6"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint gets the CogniCity server and database versions.</p>
<h4 id='http-request'>HTTP Request</h4>
<p><code>GET /</code></p>
<h1 id='chatbot-api'>Chatbot API</h1>
<p>The chatbot API exposes endpoints to receive incoming messages from social media platforms (e.g. via webhooks) and functions to send replies to users (e.g. on succesful report submission). Note that chatbot APIs may run on a custom domain.</p>

<p>The APIs are organised by social media network.</p>
<h2 id='facebook'>Facebook</h2>
<p>Send and receive Facebook messenger events.</p>
<h3 id='thank-you-message'>Thank you message</h3><pre class="highlight shell tab-shell"><code>curl -X POST <span class="s1">'/facebook/send'</span> -H <span class="s1">'Content-Type: application/json'</span> -H <span class="s1">'x-api-key: key'</span> -d <span class="s1">'{
    "reportId": 1,
    "instanceRegionCode": "brw",
    "language": "en",
    "username": "userid",
    "network": "facebook"
}'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s1">'axios'</span><span class="p">;</span> <span class="c1">// package to make http requests</span>

<span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">reportId</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="na">instanceRegionCode</span><span class="p">:</span> <span class="s2">"brw"</span><span class="p">,</span>
    <span class="na">language</span><span class="p">:</span> <span class="s2">"en"</span><span class="p">,</span>
    <span class="na">username</span><span class="p">:</span> <span class="s2">"userid"</span><span class="p">,</span>
    <span class="na">network</span><span class="p">:</span> <span class="s2">"facebook"</span>
  <span class="p">},</span> <span class="p">{</span><span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="s1">'x-api-key'</span><span class="p">:</span> <span class="s1">'key'</span><span class="p">}})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">))</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">))</span><span class="s2">```
</span></code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{}</span><span class="w">
</span></code></pre>
<p>Send a reply to user after they submit a report.</p>
<h4 id='http-request'>HTTP Request</h4>
<p><code>POST /facebook/send</code></p>
<h4 id='properties'>Properties</h4>
<table><thead>
<tr>
<th>Attribute</th>
<th>Required</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>reportId</td>
<td>true</td>
<td>The unique ID of the report submitted</td>
<td>none</td>
</tr>
<tr>
<td>instanceRegionCode</td>
<td>true</td>
<td>The instance region containing the report (from the /cities endpoint). May be null.</td>
<td>&quot;brw&quot;</td>
</tr>
<tr>
<td>language</td>
<td>true</td>
<td>The user&#39;s 2 letter language if known. May be null</td>
<td>&quot;en&quot;</td>
</tr>
<tr>
<td>username</td>
<td>true</td>
<td>The username or user id number from the social network</td>
<td>&quot;123&quot;</td>
</tr>
<tr>
<td>network</td>
<td>true</td>
<td>The name of the social network of the user</td>
<td>&quot;facebook&quot;</td>
</tr>
</tbody></table>

<aside class="success">
This request requires an API key for authorization using the `x-api-key` header.
</aside>
<h3 id='webhook-challenge'>Webhook Challenge</h3><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/facebook/webhook?hub.verify_token=&lt;token&gt;"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// Webhook configured at developers.facebook.com</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="err">//</span><span class="w"> </span><span class="err">hub</span><span class="w"> </span><span class="err">challenge</span><span class="w"> </span><span class="err">value</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint responds to a Facebook Webhook authentication challenge. See https://developers.facebook.com/docs/messenger-platform/getting-started/webhook-setup/</p>
<h4 id='http-request-2'>HTTP Request</h4>
<p><code>GET /facebook/webhook</code></p>

<aside class="success">
This request requires an API key for authorization using the `x-api-key` header.
</aside>
<h3 id='webhook-message-event'>Webhook Message Event</h3><pre class="highlight sh tab-shell"><code>curl -X POST <span class="s1">'/facebook/webhook'</span> -H <span class="s1">'Content-Type: application/json'</span> -H <span class="s1">'x-api-key: key'</span> -d <span class="s1">'{
    &lt;message event&gt;
}'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// Webhook configured at developers.facebook.com</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{}</span><span class="w">
</span></code></pre>
<p>This endpoint responds to a Facebook Webhook message event. See https://developers.facebook.com/docs/messenger-platform/getting-started/webhook-setup/</p>
<h4 id='http-request-3'>HTTP Request</h4>
<p><code>POST /facebook/webhook</code></p>
<h1 id='data-api'>Data API</h1>
<p>The data API is...</p>
<h2 id='cards'>Cards</h2><h3 id='todo'>TODO</h3>
<ul>
<li>the cards api...</li>
</ul>
<h2 id='cities'>Cities</h2>
<p>CogniCity deployments are organised by city. Cities are delineated by a unique code and bounding box geometries. Note that the term &quot;city&quot; is used somewhat arbitrairily for organisational purposes. Cities may refer to an urban conurbation or wider metropolitan area. For example in the United States &quot;Broward&quot; is used to refer to Broward County which includes multiple cities and non-urban areas.</p>
<h3 id='get-all-cities'>Get All Cities</h3><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/cities?geoformat=geojson"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s1">'axios'</span><span class="p">;</span> <span class="c1">// package to make http requests</span>

<span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/cities'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">geoformat</span><span class="p">:</span> <span class="s1">'geojson'</span>
    <span class="p">}</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">))</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">))</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Polygon"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">[</span><span class="w">
              </span><span class="p">[</span><span class="w">
                </span><span class="mf">-80.56454636</span><span class="p">,</span><span class="w">
                </span><span class="mf">26.4393434677</span><span class="w">
              </span><span class="p">],</span><span class="w">
              </span><span class="p">[</span><span class="w">
                </span><span class="mf">-80.011194015</span><span class="p">,</span><span class="w">
                </span><span class="mf">26.4376911515</span><span class="w">
              </span><span class="p">],</span><span class="w">
              </span><span class="p">[</span><span class="w">
                </span><span class="mf">-80.0147106747</span><span class="p">,</span><span class="w">
                </span><span class="mf">25.8743814793</span><span class="w">
              </span><span class="p">],</span><span class="w">
              </span><span class="p">[</span><span class="w">
                </span><span class="mf">-80.5690752042</span><span class="p">,</span><span class="w">
                </span><span class="mf">25.8759818852</span><span class="w">
              </span><span class="p">],</span><span class="w">
              </span><span class="p">[</span><span class="w">
                </span><span class="mf">-80.56454636</span><span class="p">,</span><span class="w">
                </span><span class="mf">26.4393434677</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">]</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"brw"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"broward"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint returns all cities covered by the CogniCity instance, including their three letter code and bounding box geometry.</p>
<h4 id='http-request'>HTTP Request</h4>
<p><code>GET /cities</code></p>
<h4 id='query-parameters'>Query Parameters</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>geoformat</td>
<td>false</td>
<td>Specifies either &#39;geojson&#39; or &#39;topojson&#39;</td>
<td>topojson</td>
</tr>
</tbody></table>
<h4 id='response'>Response</h4>
<p>The returned data uses the GeoJSON FeatureCollection or TopoJSON GeometryCollection types. The properties of each sensor feature as described in the following table.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>string</td>
<td>Unique 3 letter code for each city</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>City name</td>
</tr>
</tbody></table>
<h2 id='feeds'>Feeds</h2><h3 id='todo-qlue'>TODO (Qlue)</h3><h2 id='floods'>Floods</h2><h3 id='todo'>TODO</h3><h2 id='infrastructure'>Infrastructure</h2><h3 id='todo'>TODO</h3><h2 id='reports'>Reports</h2>
<p>The reports endpoint contains CogniCity reports submitted by the public. Reports are represented by point-geometries and their accompanying properties (e.g. description, time etc.). Note that all times are UTC, and geometries use the WGS 1984 coordinate system.</p>
<h3 id='live-reports'>Live Reports</h3><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/reports?city=brw&amp;geoformat=geojson"</span>

</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s1">'axios'</span><span class="p">;</span> <span class="c1">// package to make http requests</span>

<span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/reports'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">city</span><span class="p">:</span> <span class="s1">'brw'</span><span class="p">,</span>
    <span class="na">geoformat</span><span class="p">:</span> <span class="s1">'geojson'</span>
    <span class="p">}</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">))</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">))</span>

</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Point"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="mf">-80.0946879387</span><span class="p">,</span><span class="w">
            </span><span class="mf">26.1381793399</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"pkey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"94"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-06-19T17:53:43.229Z"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"grasp"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"confirmed"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ad63ccb2-024f-4617-81a1-4e8782499afa"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://images.riskmap.us/ad63ccb2-024f-4617-81a1-4e8782499afa.jpg"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"disaster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flood"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"report_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"report_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flood"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"flood_depth"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"district_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"local_area_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"instance_region_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"brw"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test flood report (MIT)"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint retrieves all reports.  Note that all times are UTC, and geometries use the WGS 1984 coordinate system.</p>
<h4 id='http-request'>HTTP Request</h4>
<p><code>GET /reports</code></p>
<h4 id='query-parameters'>Query Parameters</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
<th>Default</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>city</td>
<td>false</td>
<td>Filter reports by 3-letter city code (see cities endpoint for details). If no city specified then reports for all cities in CogniCity instance are returned</td>
<td>none</td>
<td>brw</td>
</tr>
<tr>
<td>geoformat</td>
<td>false</td>
<td>Specifies either &#39;geojson&#39; or &#39;topojson&#39;</td>
<td>topojson</td>
<td>geojson</td>
</tr>
<tr>
<td>timeperiod</td>
<td>false</td>
<td>Time period in seconds to filter reports by, must be strictly between 1 and 604800 (1 week)</td>
<td>3600 (1 hour)</td>
<td>3600</td>
</tr>
</tbody></table>
<h3 id='archive'>Archive</h3><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/reports/archive?city=brw&amp;geoformat=geojson&amp;start=2018-06-15T00:00:00-0400&amp;end=2018-06-19T15:00:00-0400"</span>

</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s1">'axios'</span><span class="p">;</span> <span class="c1">// package to make http requests</span>

<span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/reports/archive'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">city</span><span class="p">:</span> <span class="s1">'brw'</span><span class="p">,</span>
    <span class="na">geoformat</span><span class="p">:</span> <span class="s1">'geojson'</span><span class="p">,</span>
    <span class="na">start</span><span class="p">:</span> <span class="s1">'2018-06-15T00:00:00-0400'</span><span class="p">,</span>
    <span class="na">end</span><span class="p">:</span> <span class="s1">'2017-06-19T15:00:00-0400'</span>
    <span class="p">}</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">))</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">))</span>

</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Point"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="mf">-80.0977993011</span><span class="p">,</span><span class="w">
            </span><span class="mf">26.140336808</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"pkey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"92"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-06-15T18:48:57.084Z"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"grasp"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"confirmed"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d56c91dc-15c9-4d3b-83f1-cc86b94ae330"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"disaster_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flood"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"report_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"report_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flood"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"flood_depth"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"district_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"local_area_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1375"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"instance_region_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"brw"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test flood"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint retrieves reports within the specified time period. The maximum duration between start and end times is one week. Note that all times are UTC, and geometries use the WGS 1984 coordinate system.</p>
<h4 id='http-request-2'>HTTP Request</h4>
<p><code>GET /reports/archive</code></p>
<h4 id='query-parameters-2'>Query Parameters</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
<th>Default</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>city</td>
<td>false</td>
<td>Filter reports by 3-letter city code (see cities endpoint for details). If no city specified then reports for all cities in CogniCity instance are returned</td>
<td>none</td>
<td>brw</td>
</tr>
<tr>
<td>geoformat</td>
<td>false</td>
<td>Specifies either &#39;geojson&#39; or &#39;topojson&#39;</td>
<td>topojson</td>
<td>geojson</td>
</tr>
<tr>
<td>start</td>
<td>true</td>
<td>Start time for archive period in ISO 8601 string format</td>
<td>none</td>
<td>2018-06-15T00:00:00-0400</td>
</tr>
<tr>
<td>end</td>
<td>true</td>
<td>End time for archive period in ISO 8601 string format. Must bet within 604800 seconds (1 week) from start time</td>
<td>none</td>
<td>2017-06-19T15:00:00-0400</td>
</tr>
</tbody></table>

<aside class="success">
Start and end times require UTC offsets using either '+' or '-' which need to be URL encoded as '%2B' and '%2D' respectively.
</aside>
<h3 id='timeseries'>Timeseries</h3><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/reports/timeseries?city=brw&amp;start=2018-06-19T13:00:00%2D0400&amp;end=2018-06-19T15:00:00%2D0400"</span>

</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s1">'axios'</span><span class="p">;</span> <span class="c1">// package to make http requests</span>

<span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/reports/timeseries'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">start</span><span class="p">:</span> <span class="s1">'2018-06-19T13:00:00-0400'</span><span class="p">,</span>
    <span class="na">end</span><span class="p">:</span> <span class="s1">'2018-06-19T15:00:00-0400'</span>
    <span class="p">}</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">))</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">))</span>

</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-06-19T17:00:00.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-06-19T18:00:00.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-06-19T19:00:00.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint generates a time series of reports presented as a count of reports every hour within the specified time period. The maximum duration between start and end times is one week. Report count is recorded alongside an hourly UTC timestamp in ISO 8061 format.</p>
<h4 id='http-request-3'>HTTP Request</h4>
<p><code>GET /reports/timeseries</code></p>
<h4 id='query-parameters-3'>Query Parameters</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
<th>Default</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>city</td>
<td>false</td>
<td>Filter reports by 3-letter city code (see cities endpoint for details). If no city specified then reports for all cities in CogniCity instance are returned</td>
<td>none</td>
<td>jbd</td>
</tr>
<tr>
<td>start</td>
<td>true</td>
<td>Start time for archive period in ISO 8601 string format</td>
<td>none</td>
<td>2017-02-21T07:00:00+0700</td>
</tr>
<tr>
<td>end</td>
<td>true</td>
<td>End time for archive period in ISO 8601 string format. Must bet within 604800 seconds (1 week) from start time</td>
<td>none</td>
<td>2017-02-21T19:00:00+0700</td>
</tr>
</tbody></table>

<aside class="success">
Start and end times require UTC offsets using either '+' or '-' which need to be URL encoded as '%2B' and '%2D' respectively.
</aside>
<h1 id='sensors-api'>Sensors API</h1>
<p>The CogniCity Sensors endpoints supports centralizing data from automated sensor networks. Sensor data can be inserted into the database for storage, and subsequently served as GeoJSON or TopoJSON to support map visualisations.</p>

<p>Sensor locations are point geometries defined using latitude and longitude coordinates in the WGS 1984 coordinate system.</p>

<aside class="notice">
Note that these endpoints reside on a separate sensors subdomain.
</aside>
<h2 id='get-all-sensors'>Get All Sensors</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/?bbox=-81,27,-79,25&amp;geoformat=geojson"</span>

</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s1">'axios'</span><span class="p">;</span> <span class="c1">// package to make http requests</span>

<span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">bbox</span><span class="p">:</span> <span class="s1">'-81,27,-79,25'</span><span class="p">,</span>
    <span class="na">geoformat</span><span class="p">:</span> <span class="s1">'geojson'</span>
    <span class="p">}</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">))</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">))</span>

</code></pre>
<blockquote>
<p>The response body contains the following JSON object:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Point"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="mf">-80.3853056</span><span class="p">,</span><span class="w">
                </span><span class="mf">26.0341111</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-10-24T22:35:58.875Z"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"260653080184901"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GW"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"class"</span><span class="p">:</span><span class="w"> </span><span class="s2">"62610"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"units"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ft"</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Point"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="mf">-80.1153333</span><span class="p">,</span><span class="w">
                </span><span class="mf">26.31780556</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-10-24T22:35:58.883Z"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"261903080065601"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GW"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"class"</span><span class="p">:</span><span class="w"> </span><span class="s2">"62610"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"units"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ft"</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint returns a collection of sensors and their properties within the specified bounding box. If no bounding box is provided all sensors in the database will be returned.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /</code></p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
<th>Default</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>bbox</td>
<td>false</td>
<td>A list of longitude and latitude pairs representing the top left and bottom right corners of a bounding box for sensor locations.</td>
<td>none</td>
<td>longitude, latitude, longitude, latitude</td>
</tr>
<tr>
<td>geoformat</td>
<td>false</td>
<td>Specifies either &#39;geojson&#39; or &#39;topojson&#39;</td>
<td>geojson</td>
<td>geojson</td>
</tr>
<tr>
<td>agency</td>
<td>false</td>
<td>Optional filter properties.agency of the sensor (e.g. &#39;USGS&#39;)</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id='response'>Response</h3>
<p>The returned data uses the GeoJSON FeatureCollection or TopoJSON GeometryCollection types. The properties of each sensor feature as described in the following table.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>Unique sensor identifier</td>
</tr>
<tr>
<td>created</td>
<td>string</td>
<td>timestamp sensor created in database (ISO 8601 format)</td>
</tr>
<tr>
<td>properties</td>
<td>json</td>
<td>metadata attributes for each sensor</td>
</tr>
</tbody></table>
<h2 id='get-sensor-data'>Get Sensor Data</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/3"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s1">'axios'</span><span class="p">;</span> <span class="c1">// package to make http requests</span>

<span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/3'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">))</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">))</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"dataId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"24439"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"sensorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-16T17:37:47.116Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"observation"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"observations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.84"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dateTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-15T13:45:00.000-04:00"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.84"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dateTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-15T14:00:00.000-04:00"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint retrieves a list of data for a specific sensor. Data are organised into records, indexed by the <code>id</code> attribute. The <code>created</code> attribute details when the record was last updated. The <code>properties</code> attribute contains the data for the record. The <code>properties</code> object may be in varying formats. The example shows a <code>properties</code> object for a single data record which contains an <code>observations</code> array of measurements. Data records are returned in reverse chronological order by <code>created</code> date.</p>

<aside class="warn">
When a sensor does not have any data associated with it the endpoint will return a 404 error "No data found for sensor [ID]".
</aside>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET /&lt;ID&gt;</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ID</td>
<td>The ID of the sensor to retrieve</td>
</tr>
<tr>
<td>type</td>
<td>Optional filter for the type field</td>
</tr>
<tr>
<td>limit</td>
<td>Optional limit on number of returned records</td>
</tr>
</tbody></table>
<h3 id='response-2'>Response</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>dataId</td>
<td>integer</td>
<td>Unique data record identifier</td>
</tr>
<tr>
<td>sensorId</td>
<td>integer</td>
<td>The ID of the sensor</td>
</tr>
<tr>
<td>created</td>
<td>string</td>
<td>Data record update time (ISO 8601 format)</td>
</tr>
<tr>
<td>properties</td>
<td>object</td>
<td>Record data</td>
</tr>
</tbody></table>
<h2 id='create-sensor'>Create Sensor</h2><pre class="highlight shell tab-shell"><code>curl -X POST / -H <span class="s1">'Content-Type: application/json'</span> -H <span class="s1">'x-api-key: key'</span> -d <span class="s1">'{
    "properties":{
        "name": "test sensor",
    "agency": "usgs"
    },
    "location":{
        "lat": 25.0,
        "lng": -80.0
    }
}'</span>

</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s1">'axios'</span><span class="p">;</span> <span class="c1">// package to make http requests</span>

<span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">name</span><span class="p">:</span> <span class="s2">"test sensor"</span><span class="p">,</span>
      <span class="na">agency</span><span class="p">:</span> <span class="s2">"usgs"</span>
    <span class="p">},</span>
    <span class="na">location</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">lat</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span>
      <span class="na">lng</span><span class="p">:</span> <span class="o">-</span><span class="mf">80.0</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="p">{</span><span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="s1">'x-api-key'</span><span class="p">:</span> <span class="s1">'key'</span><span class="p">}})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">))</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">))</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Point"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="mf">-80.0</span><span class="p">,</span><span class="w">
                        </span><span class="mf">25.0</span><span class="w">
                    </span><span class="p">]</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-16T18:25:07.613Z"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test sensor"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"agency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usgs"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint creates a new sensor. On success a GeoJSON feature representing the new sensor is returned.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>POST /</code></p>

<aside class="success">
This request requires an API key for authorization using the `x-api-key` header.
</aside>
<h3 id='new-sensor-attributes'>New Sensor Attributes</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>properties</td>
<td>object</td>
<td>Sensor metadata properties</td>
<td>Yes</td>
</tr>
<tr>
<td>properties.agency</td>
<td>string</td>
<td>Optional agency tag for sensor (e.g. &#39;usgs&#39;)</td>
<td></td>
</tr>
<tr>
<td>location</td>
<td>object</td>
<td>An object with <code>lat</code> and <code>lng</code> numerical values representing the sensor&#39;s latitude and longitude</td>
<td>Yes</td>
</tr>
</tbody></table>
<h2 id='add-sensor-data'>Add Sensor Data</h2><pre class="highlight shell tab-shell"><code>curl -X POST /4 -H <span class="s1">'Content-Type: application/json'</span> -H <span class="s1">'x-api-key: key'</span> -d <span class="s1">'{
    "properties":{
        "METAR": "CYYQ 182200Z 07002KT 15SM OVC017 06/03 A2966 RMK SC10 3 POLAR BEARS ALNG RNWY==",
    "type": "observation"
  }
}'</span>

</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s1">'axios'</span><span class="p">;</span> <span class="c1">// package to make http requests</span>

<span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">'/4'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">METAR</span><span class="p">:</span> <span class="s2">"CYYQ 182200Z 07002KT 15SM OVC017 06/03 A2966 RMK SC10 3 POLAR BEARS ALNG RNWY=="</span><span class="p">,</span>
      <span class="na">type</span><span class="p">:</span> <span class="s2">"observation"</span>
    <span class="p">},</span>
  <span class="p">},</span> <span class="p">{</span><span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="s1">'x-api-key'</span><span class="p">:</span> <span class="s1">'key'</span><span class="p">}})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">))</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">))</span>

</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"dataId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"240288"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"sensorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-16T19:30:33.042Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint adds a new data record to the specified sensor. On success the sensor ID and an updated timestamp are returned.</p>

<aside class="success">
This request requires an API key for authorization using the `x-api-key` header.
</aside>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>POST /&lt;ID&gt;</code></p>
<h3 id='url-parameters-2'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ID</td>
<td>The ID of the sensor</td>
</tr>
</tbody></table>
<h3 id='new-sensor-attributes-2'>New Sensor Attributes</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>properties</td>
<td>object</td>
<td>New data record to be added</td>
<td>Yes</td>
</tr>
<tr>
<td>properties.type</td>
<td>string</td>
<td>Optional type tag for different measurement types (e.g. observation vs manual, or mean vs daily max)</td>
<td></td>
</tr>
</tbody></table>
<h2 id='delete-sensor-data'>Delete Sensor Data</h2><pre class="highlight sh tab-shell"><code>curl -X DELETE /4/2345 -H <span class="s1">'Content-Type: application/json'</span> -H <span class="s1">'x-api-key: key'</span>

</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s1">'axios'</span><span class="p">;</span> <span class="c1">// http requests</span>
<span class="c1">// delete record 2345 from sensor 4</span>
<span class="nx">axios</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s1">'/sensors/4/2345'</span><span class="p">,</span> <span class="p">{</span><span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="s1">'x-api-key'</span><span class="p">:</span> <span class="s1">'key'</span><span class="p">},</span> <span class="p">{</span><span class="s1">'content-type'</span><span class="p">:</span> <span class="s1">'application/json'</span><span class="p">}})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">))</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">))</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint deletes a data record for the specified sensor. On success the statusCode and an empty body object are returned.</p>

<aside class="success">
This request requires an API key for authorization using the `x-api-key` header.
</aside>
<h3 id='http-request-5'>HTTP Request</h3>
<p><code>DELETE /&lt;ID&gt;/&lt;DATAID&gt;</code></p>
<h3 id='url-parameters-3'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ID</td>
<td>The ID of the sensor</td>
</tr>
<tr>
<td>DATAID</td>
<td>The ID of the data record to delete</td>
</tr>
</tbody></table>
<h2 id='delete-sensor'>Delete Sensor</h2><pre class="highlight sh tab-shell"><code>curl -X DELETE /4 -H <span class="s1">'Content-Type: application/json'</span> -H <span class="s1">'x-api-key: key'</span>

</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s1">'axios'</span><span class="p">;</span> <span class="c1">// http requests</span>
<span class="c1">// delete record 2345 from sensor 4</span>
<span class="nx">axios</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s1">'/sensors/4'</span><span class="p">,</span> <span class="p">{</span><span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="s1">'x-api-key'</span><span class="p">:</span> <span class="s1">'key'</span><span class="p">},</span> <span class="p">{</span><span class="s1">'content-type'</span><span class="p">:</span> <span class="s1">'application/json'</span><span class="p">}})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">))</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">))</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint deletes a sensor and any data from that sensor. On success the statusCode and an empty body object are returned.</p>

<aside class="success">
This request requires an API key for authorization using the `x-api-key` header.
</aside>
<h3 id='http-request-6'>HTTP Request</h3>
<p><code>DELETE /&lt;ID&gt;</code></p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
